# second entity, links, link methods, init, procedures, local variables,
# dump's suffix argument, choice

import:
   - ../standard/console.yml
   - generations/generation.yml
   #Â dependance
   - dependance/deces_dependance.yml
   - dependance/dependance_transition.yml

entities:
  individus:
    processes:
      options_initialisation:
        - dependance_initialisation()

      options_statistiques_initialisation:
        - dependance_statistiques_initialisation()

      dependance_statistiques_initialisation:
        - csv('period', period, 'dependance', groupby(
            age, sexe, expr = count((dependance_niveau == 1) or (dependance_niveau == 2))
            ),
            fname = 'dependance.csv',
            mode = 'a'
            )
        - csv('period', period, 'dependance', groupby(
              age, data_origin, expr = count((dependance_niveau == 1) or (dependance_niveau == 2))
              ),
            fname = 'dependance2.csv',
            mode = 'a'
            )
        - csv('period', period, 'dependance', groupby(
              age, data_origin, dependance_gir, expr = count((dependance_niveau == 1) or (dependance_niveau == 2))
              ),
            fname = 'dependance_gir.csv',
            mode = 'a'
            )

      options_statistiques_fin_de_periode:
        - csv('period', period, 'dependance', groupby(
            age, sexe, expr = count((dependance_niveau == 1) or (dependance_niveau == 2))
            ),
            fname = 'dependance.csv',
            mode = 'a'
            )
        - csv('period', period, 'dependance', groupby(
            age, data_origin, expr = count((dependance_niveau == 1) or (dependance_niveau == 2))
            ),
            fname = 'dependance2.csv',
            mode = 'a'
            )
        - csv('period', period, 'dependance', groupby(
              age, data_origin, dependance_gir, count()
              ),
            fname = 'dependance_gir.csv',
            mode = 'a'
            )
